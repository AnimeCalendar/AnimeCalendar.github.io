"use strict";const titleList=Object.keys(Object.assign(STORE,PAST)).sort(),search=document.getElementById("search"),titles=document.getElementById("titles");let indexLi=99;function results(e){let t=e.target.value,s=100;if(indexLi=99,t){titles.innerHTML="";for(let e of titleList)if(e.toLocaleLowerCase().includes(t.toLocaleLowerCase())){let t=document.createElement("li");t.innerHTML=e,t.id=s.toString(),t.tabIndex=s-100,s++,t.onclick=e=>{streamInfo(e.target.innerHTML),search.value="",titles.style.display="none"},t.onmousemove=e=>{indexLi=parseInt(e.target.id);let t=document.querySelector(".active");t&&(t.className=""),e.target.className="active"},t.oncontextmenu=()=>titles.style.display="none",titles.append(t)}}titles.style.display=s>100?"":"none"}function move(e){let t=document.getElementById((indexLi+e).toString());t&&(t.className="active",t.focus(),search.focus(),t.nextElementSibling&&(t.nextElementSibling.className=""),t.previousElementSibling&&(t.previousElementSibling.className=""),document.getElementById((indexLi+e).toString())&&(indexLi+=e))}search.oninput=e=>results(e),search.onfocus=e=>e.relatedTarget&&e.relatedTarget.className?"active"!=e.relatedTarget.className&&results(e):results(e),search.onkeyup=e=>{switch(e.key){case"Enter":let t=document.getElementById((99==indexLi?indexLi+1:indexLi).toString());search.value&&t&&streamInfo(t.innerHTML),search.value="",titles.style.display="none",search.blur();break;case"Escape":e.target.blur()}},search.onkeydown=e=>{switch(e.keyCode){case 38:move(-1),e.preventDefault();break;case 40:move(1),e.preventDefault()}},search.addEventListener("focusout",(e=>{titles.style.display="none",e.relatedTarget&&("active"==e.relatedTarget.className?titles.style.display="":"titles"==e.relatedTarget.parentElement.id&&e.relatedTarget.click())}));
