"use strict";class Search{constructor(e){this.titleList=e.sort(),this.search=document.getElementById("search"),this.titles=document.getElementById("titles"),this.indexLi=99,this.search.oninput=e=>this.results(e),this.search.onfocus=e=>e.relatedTarget&&e.relatedTarget.className?"active"!==e.relatedTarget.className&&this.results(e):this.results(e),this.search.onkeyup=e=>{switch(e.key){case"Enter":{const e=document.getElementById((99===this.indexLi?this.indexLi+1:this.indexLi).toString());this.search.value&&e&&CAL.streamInfo(e.innerHTML),this.search.value="",this.titles.style.display="none",this.search.blur();break}case"Escape":e.target.blur()}},this.search.onkeydown=e=>{switch(e.key){case"ArrowUp":this.move(-1),e.preventDefault();break;case"ArrowDown":this.move(1),e.preventDefault()}},this.search.addEventListener("focusout",(e=>{this.titles.style.display="none";const t=e.relatedTarget;t&&("active"===t.className?this.titles.style.display="":"titles"===t.parentElement.id&&t.click())}))}results(e){const t=e.target.value;let s=100;this.indexLi=99,t&&(this.titles.innerHTML="",this.titleList.forEach((e=>{if(e.toLocaleLowerCase().includes(t.toLocaleLowerCase())){const t=document.createElement("li");t.innerHTML=e,t.id=s.toString(),t.tabIndex=s-100,s++,t.onclick=e=>{CAL.streamInfo(e.target.innerHTML),this.search.value="",this.titles.style.display="none"},t.onmousemove=e=>{const t=e.target;this.indexLi=Number(t.id);const s=document.querySelector(".active");s&&(s.className=""),t.className="active"},t.oncontextmenu=()=>{this.titles.style.display="none"},this.titles.append(t)}}))),this.titles.style.display=s>100?"":"none"}move(e){const t=document.getElementById((this.indexLi+e).toString());t&&(t.className="active",t.focus(),this.search.focus(),t.nextElementSibling&&(t.nextElementSibling.className=""),t.previousElementSibling&&(t.previousElementSibling.className=""),document.getElementById((this.indexLi+e).toString())&&(this.indexLi+=e))}}
