"use strict";let titleList=Object.keys(Object.assign(JSON.parse(localStorage.getItem("storage")),JSON.parse(localStorage.getItem("past"))));const search=document.getElementById("search"),titles=document.getElementById("titles");let indexLi=99;function results(e){let t=e.target.value;if(indexLi=99,t){titles.style.display="",titles.innerHTML="";let e=100;for(let s of titleList)if(s.toLocaleLowerCase().includes(t.toLocaleLowerCase())){let t=document.createElement("li");t.innerHTML=s,t.classList.add("highlight"),t.setAttribute("id",e.toString()),t.setAttribute("tabindex",(e-100).toString()),e++,t.addEventListener("click",(function(){callStreamInfo(this.innerHTML)})),titles.append(t)}100==e&&(titles.style.display="none")}else titles.style.display="none"}function move(e){let t=document.getElementById((indexLi+e).toString());t&&(t.classList.add("active"),t.focus(),search.focus(),t.nextElementSibling&&t.nextElementSibling.classList.remove("active"),t.previousElementSibling&&t.previousElementSibling.classList.remove("active"),document.getElementById((indexLi+e).toString())&&(indexLi+=e))}function callStreamInfo(e){let t=JSON.parse(localStorage.getItem("storage")),s=JSON.parse(localStorage.getItem("past"));e in t?streamInfo(t,e):streamInfo(s,e),search.value="",titles.style.display="none"}search.onkeyup=e=>{switch(e.key){case"Enter":let t=document.getElementById((99==indexLi?indexLi+1:indexLi).toString());t&&callStreamInfo(t.innerHTML),search.value="",titles.style.display="none",search.blur();break;case"Backspace":case"Delete":results(e);break;default:1==e.key.length&&results(e)}},search.onkeydown=e=>{switch(e.keyCode){case 38:move(-1),e.preventDefault();break;case 40:move(1),e.preventDefault()}},search.onclick=e=>{results(e)},search.addEventListener("focusout",(e=>{e.relatedTarget?"active"==e.relatedTarget.classList[1]?titles.style.display="":"highlight"==e.relatedTarget.className?(e.relatedTarget.click(),titles.style.display="none"):titles.style.display="none":titles.style.display="none"}));
