function minMax(e,t){return new Date("2000/1/1 "+e[1])<new Date("2000/1/1 "+t[1])?[e,t]:[t,e]}function link(e){null!=$(e)[0]&&(window.open($(e).attr("href")),stream())}function stream(){var e=$("#title")[0].textContent,t=JSON.parse(localStorage.getItem("shows"));e in t&&(updateSetter(t,e,!0),$("#"+ider_show(e)).css({color:"#4f4f4f"}),$("#reset").css({visibility:"visible"})),localStorage.setItem("shows",JSON.stringify(t))}function updateSetter(e,t,i){null==$("#left")[0].style[0]?e[t][0]=i:e[t][1]=i}function reset(){var e=$("#title")[0].textContent,t=JSON.parse(localStorage.getItem("shows"));updateSetter(t,e,!1),$("#"+ider_show(e)).css({color:"purple"}),$($("#reset")).css({visibility:"hidden"}),localStorage.setItem("shows",JSON.stringify(t))}function arrow(){let e=$("#title")[0];var t=JSON.parse(localStorage.getItem("shows"));null!=$("#right")[0].style[0]?$("#reset").css({visibility:"hidden"}):null!=e&&null!=t&&e.textContent in t&&(e=e.textContent,(null==$("#left")[0].style[0]?t[e][0]:t[e][1])?$("#reset").css({visibility:"visible"}):$("#reset").css({visibility:"hidden"}))}function setter(e){var t=$("#title")[0].textContent,i=JSON.parse(localStorage.getItem("shows"));if("add"==$(".setter")[0].id){if(0==Object.keys(i).length){i={},n=[t,e[t].time],localStorage.setItem("min",JSON.stringify(n)),localStorage.setItem("max",JSON.stringify(n));let r=new Date;localStorage.setItem("time",JSON.stringify([r.getWeek,r.getFullYear]))}else{var n=[t,e[t].time];localStorage.setItem("min",JSON.stringify(minMax(n,JSON.parse(localStorage.getItem("min")))[0])),localStorage.setItem("max",JSON.stringify(minMax(n,JSON.parse(localStorage.getItem("max")))[1]))}$("#"+ider_show(t)).css({"border-color":"#4f004f"}),$(".setter")[0].innerHTML="Remove from Your List",$(".setter")[0].id="sub",i[t]=[!1,!1]}else if(null!=i&&t in i){if(delete i[t],$("#reset").css({visibility:"hidden"}),0==Object.keys(i).length)localStorage.removeItem("min"),localStorage.removeItem("max");else if(1==Object.keys(i).length){let t=Object.keys(i)[0];localStorage.setItem("min",JSON.stringify([t,e[t].time])),localStorage.setItem("max",JSON.stringify([t,e[t].time]))}else{var r=JSON.parse(localStorage.getItem("min"));if(t==r[0]){r=new Date("2001");for(let t in i){if((l=new Date("2000/1/1 "+e[t].time))<r){r=l;var s=t}}localStorage.setItem("min",JSON.stringify([s,e[s].time]))}var o=JSON.parse(localStorage.getItem("max"));if(t==o[0]){o=new Date("1999");for(let t in i){var l;if(o<(l=new Date("2000/1/1 "+e[t].time))){o=l;s=t}}n=[s,e[s].time],localStorage.setItem("max",JSON.stringify(n))}}$("#"+ider_show(t)).css({"border-color":"grey",color:"purple"}),$(".setter")[0].innerHTML="Add to Your List",$(".setter")[0].id="add"}localStorage.setItem("shows",JSON.stringify(i)),"Full List"==$("#list")[0].innerHTML&&TheBigBang()}$(document).ready((function(){fetch("./shows/shows.json").then((function(e){return e.json()})).then((function(e){$(".setter").click((function(){setter(e)})),Mousetrap.bind("a",(function(){setter(e)}))})),$(".stream").click((function(){stream()})),$("#reset").click((function(){reset()})),$(".arrow").on("click.arrow",(function(){arrow()})),Mousetrap.bind(["n","p"],(function(e){"n"==e.key?left():right(),arrow()})),Mousetrap.bind("r",(function(){reset()})),Mousetrap.bind("1",(function(){link("#0")})),Mousetrap.bind("2",(function(){link("#1")})),Mousetrap.bind("3",(function(){link("#2")})),Mousetrap.bind("4",(function(){link("#3")})),Mousetrap.bind("5",(function(){link("#4")})),Mousetrap.bind("6",(function(){link("#5")})),Mousetrap.bind("7",(function(){link("#6")})),Mousetrap.bind("8",(function(){link("#7")})),Mousetrap.bind("9",(function(){link("#8")}))}));
