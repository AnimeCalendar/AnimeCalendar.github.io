"use strict";class Season{constructor(){this.list=JSON.parse(localStorage.getItem("season"))??{}}async init(){let e=document.createElement("div");e.id="season",e.tabIndex=1,document.body.append(e);let t=await(await fetch("season/shows.json")).json(),n=0;for(let s in"Your List"==document.getElementById("list").innerHTML?t:this.list){let i=document.createElement("div");i.className="show-season";let r=document.createElement("table");r.className="info";let l=document.createElement("tr"),a=document.createElement("th");a.innerHTML=s,l.append(a),r.append(l);for(let l in t[s])switch(l){case"cover":let a=document.createElement("div");a.className="cover-season",a.align="right";let o=document.createElement("img");if(o.src=t[s][l],o.width=340,o.height=440,2<n){o.src+="?w=5&h=5",new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(!e.isIntersecting)return;let n=e.target;n.src=n.src.substring(0,n.src.length-8),t.unobserve(n)}))}),{root:e,rootMargin:"500px 0px"}).observe(o),o.loading="lazy"}else n++;a.append(o),i.append(a);break;case"Genres":r.append(this.row(l,t[s][l].join(", ")));break;default:r.append(this.row(l,t[s][l]))}let o=document.createElement("button");o.innerHTML=s in this.list?"Remove":"Add",o.onclick=e=>{let t=e.srcElement.previousElementSibling.childNodes[0].innerText;if(t in this.list){delete this.list[t],e.srcElement.innerHTML="Add";let n={};for(let e of Object.keys(this.list).sort())n[e]=null;this.list=n}else this.list[t]=null,e.srcElement.innerHTML="Remove";localStorage.setItem("season",JSON.stringify(this.list))},i.append(r),i.append(o),e.append(i)}}row(e,t){let n=document.createElement("tr"),s=document.createElement("td");return s.innerHTML=e+": "+t,n.append(s),n}}
