"use strict";function season(){let e=document.createElement("div");e.id="season",e.tabIndex=1,document.body.append(e),fetch("season/shows.json").then((e=>e.json())).then((t=>{let n=JSON.parse(localStorage.getItem("season")),r=0;for(let a in t){let o=document.createElement("div");o.className="show-season";let s=document.createElement("table");s.className="info";let l=document.createElement("tr"),c=document.createElement("th");c.innerHTML=a,l.append(c),s.append(l);for(let n in t[a])switch(n){case"cover":let l=document.createElement("div");l.className="cover-season",l.align="right";let c=document.createElement("img");if(c.src=t[a][n],c.width=340,c.height=440,2<r){new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(!e.isIntersecting)return;let n=e.target;n.src=n.src.substring(0,n.src.length-8),t.unobserve(n)}))}),{root:e,rootMargin:"500px 0px"}).observe(c),c.loading="lazy"}else r++;l.append(c),o.append(l);break;case"Genres":s.append(row(n,t[a][n].join(", ")));break;default:s.append(row(n,t[a][n]))}let i=document.createElement("button");i.innerHTML=a in n?"Remove":"Add",i.onclick=e=>{let t=e.srcElement.previousElementSibling.childNodes[0].innerText,n=JSON.parse(localStorage.getItem("season"));t in n?(delete n[t],e.srcElement.innerHTML="Add"):(n[t]=null,e.srcElement.innerHTML="Remove"),localStorage.setItem("season",JSON.stringify(n))},o.append(s),o.append(i),e.append(o)}}))}function row(e,t){let n=document.createElement("tr"),r=document.createElement("td");return r.innerHTML=e+": "+t,n.append(r),n}localStorage.getItem("season")||localStorage.setItem("season",JSON.stringify({}));
